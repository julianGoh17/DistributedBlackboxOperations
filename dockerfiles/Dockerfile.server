ARG BASE_IMAGE

FROM ${BASE_IMAGE}:latest

ARG JAR_NAME
ENV JAR_NAME=${JAR_NAME}
ENV JAR_FILE_FOLDER="/resources/jar"

COPY server/target/${JAR_NAME} ${JAR_NAME}

ARG SERVER_OPENAPI_YAML
ENV OPENAPI_SPEC_LOCATION="/resources/ServerEndpoints.yaml"

COPY ${SERVER_OPENAPI_YAML} ${OPENAPI_SPEC_LOCATION}

VOLUME [ ${JAR_FILE_FOLDER} ]

CMD java -jar ${JAR_NAME}